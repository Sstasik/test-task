{"ast":null,"code":"import { makeAutoObservable, runInAction } from \"mobx\";\nimport BooksService from \"../services/BooksService\";\nimport Book from \"../models/Book\";\nexport default class BooksStore {\n  constructor() {\n    this.books = [];\n    this.privateBooks = [];\n    this.isLoading = false;\n    this.error = null;\n    this.showPrivateBooks = false;\n    makeAutoObservable(this);\n    this.booksService = new BooksService();\n  }\n  async loadBooks() {\n    this.isLoading = true;\n    this.error = null;\n    try {\n      const books = await this.booksService.getBooks();\n      runInAction(() => {\n        this.books = books;\n        this.isLoading = false;\n      });\n    } catch (error) {\n      runInAction(() => {\n        this.error = error.message;\n        this.isLoading = false;\n      });\n    }\n  }\n  async loadPrivateBooks() {\n    this.isLoading = true;\n    this.error = null;\n    try {\n      const privateBooks = await this.booksService.getPrivateBooks();\n      runInAction(() => {\n        this.privateBooks = privateBooks;\n        this.isLoading = false;\n      });\n    } catch (error) {\n      runInAction(() => {\n        this.error = error.message;\n        this.isLoading = false;\n      });\n    }\n  }\n  async addBook(book) {\n    this.isLoading = true;\n    this.error = null;\n    try {\n      const success = this.showPrivateBooks ? await this.booksService.addPrivateBook(book) : await this.booksService.addBook(book);\n      runInAction(() => {\n        if (success) {\n          if (this.showPrivateBooks) {\n            this.privateBooks.push(book);\n          } else {\n            this.books.push(book);\n          }\n        }\n        this.isLoading = false;\n      });\n      return success;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error.message;\n        this.isLoading = false;\n      });\n      return false;\n    }\n  }\n  setShowPrivateBooks(show) {\n    this.showPrivateBooks = show;\n  }\n  getDisplayedBooks() {\n    return this.showPrivateBooks ? this.privateBooks : this.books;\n  }\n  getPrivateBooksCount() {\n    return this.privateBooks.length;\n  }\n  createNewBook() {\n    return new Book();\n  }\n}","map":{"version":3,"names":["makeAutoObservable","runInAction","BooksService","Book","BooksStore","constructor","books","privateBooks","isLoading","error","showPrivateBooks","booksService","loadBooks","getBooks","message","loadPrivateBooks","getPrivateBooks","addBook","book","success","addPrivateBook","push","setShowPrivateBooks","show","getDisplayedBooks","getPrivateBooksCount","length","createNewBook"],"sources":["/Users/marangulak/Desktop/test-taskr/src/Books/stores/BooksStore.js"],"sourcesContent":["import { makeAutoObservable, runInAction } from \"mobx\";\nimport BooksService from \"../services/BooksService\";\nimport Book from \"../models/Book\";\n\nexport default class BooksStore {\n  books = [];\n  privateBooks = [];\n  isLoading = false;\n  error = null;\n  showPrivateBooks = false;\n\n  constructor() {\n    makeAutoObservable(this);\n    this.booksService = new BooksService();\n  }\n\n  async loadBooks() {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const books = await this.booksService.getBooks();\n      runInAction(() => {\n        this.books = books;\n        this.isLoading = false;\n      });\n    } catch (error) {\n      runInAction(() => {\n        this.error = error.message;\n        this.isLoading = false;\n      });\n    }\n  }\n\n  async loadPrivateBooks() {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const privateBooks = await this.booksService.getPrivateBooks();\n      runInAction(() => {\n        this.privateBooks = privateBooks;\n        this.isLoading = false;\n      });\n    } catch (error) {\n      runInAction(() => {\n        this.error = error.message;\n        this.isLoading = false;\n      });\n    }\n  }\n\n  async addBook(book) {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const success = this.showPrivateBooks\n        ? await this.booksService.addPrivateBook(book)\n        : await this.booksService.addBook(book);\n\n      runInAction(() => {\n        if (success) {\n          if (this.showPrivateBooks) {\n            this.privateBooks.push(book);\n          } else {\n            this.books.push(book);\n          }\n        }\n        this.isLoading = false;\n      });\n      return success;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error.message;\n        this.isLoading = false;\n      });\n      return false;\n    }\n  }\n\n  setShowPrivateBooks(show) {\n    this.showPrivateBooks = show;\n  }\n\n  getDisplayedBooks() {\n    return this.showPrivateBooks ? this.privateBooks : this.books;\n  }\n\n  getPrivateBooksCount() {\n    return this.privateBooks.length;\n  }\n\n  createNewBook() {\n    return new Book();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}