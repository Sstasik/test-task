{"ast":null,"code":"import { makeAutoObservable, runInAction } from \"mobx\";\nimport BooksService from \"../services/BooksService\";\nexport default class BooksStore {\n  constructor() {\n    this.books = [];\n    this.privateBooks = [];\n    this.isLoading = false;\n    this.error = null;\n    this.showPrivateBooks = false;\n    this.booksService = void 0;\n    makeAutoObservable(this);\n    this.booksService = new BooksService();\n  }\n  async loadBooks() {\n    this.isLoading = true;\n    this.error = null;\n    try {\n      const books = await this.booksService.getBooks();\n      runInAction(() => {\n        this.books = books;\n        this.isLoading = false;\n      });\n      return books;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error instanceof Error ? error.message : String(error);\n        this.isLoading = false;\n      });\n      return [];\n    }\n  }\n  async loadPrivateBooks() {\n    this.isLoading = true;\n    this.error = null;\n    try {\n      const privateBooks = await this.booksService.getPrivateBooks();\n      runInAction(() => {\n        this.privateBooks = privateBooks;\n        this.isLoading = false;\n      });\n      return privateBooks;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error instanceof Error ? error.message : String(error);\n        this.isLoading = false;\n      });\n      return [];\n    }\n  }\n  async addBook(book) {\n    this.isLoading = true;\n    this.error = null;\n    try {\n      let success;\n      if (this.showPrivateBooks) {\n        success = await this.booksService.addPrivateBook(book);\n        if (success) {\n          runInAction(() => {\n            this.privateBooks.push(book);\n            this.isLoading = false;\n          });\n          await this.loadBooks();\n        } else {\n          runInAction(() => {\n            this.isLoading = false;\n          });\n        }\n      } else {\n        success = await this.booksService.addBook(book);\n        if (success) {\n          runInAction(() => {\n            this.books.push(book);\n            this.isLoading = false;\n          });\n          await this.loadPrivateBooks();\n        } else {\n          runInAction(() => {\n            this.isLoading = false;\n          });\n        }\n      }\n      return success;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error instanceof Error ? error.message : String(error);\n        this.isLoading = false;\n      });\n      return false;\n    }\n  }\n  setError(message) {\n    this.error = message;\n    return false;\n  }\n  getDisplayedBooks() {\n    return this.showPrivateBooks ? this.privateBooks : this.books;\n  }\n}","map":{"version":3,"names":["makeAutoObservable","runInAction","BooksService","BooksStore","constructor","books","privateBooks","isLoading","error","showPrivateBooks","booksService","loadBooks","getBooks","Error","message","String","loadPrivateBooks","getPrivateBooks","addBook","book","success","addPrivateBook","push","setError","getDisplayedBooks"],"sources":["/Users/marangulak/Desktop/test-task/src/Books/stores/BooksStore.ts"],"sourcesContent":["import { makeAutoObservable, runInAction } from \"mobx\";\nimport BooksService from \"../services/BooksService\";\nimport Book from \"../models/Book\";\n\nexport default class BooksStore {\n  books: Book[] = [];\n  privateBooks: Book[] = [];\n  isLoading: boolean = false;\n  error: string | null = null;\n  showPrivateBooks: boolean = false;\n  private booksService: BooksService;\n\n  constructor() {\n    makeAutoObservable(this);\n    this.booksService = new BooksService();\n  }\n\n  async loadBooks(): Promise<Book[]> {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const books = await this.booksService.getBooks();\n      runInAction(() => {\n        this.books = books;\n        this.isLoading = false;\n      });\n      return books;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error instanceof Error ? error.message : String(error);\n        this.isLoading = false;\n      });\n      return [];\n    }\n  }\n\n  async loadPrivateBooks(): Promise<Book[]> {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const privateBooks = await this.booksService.getPrivateBooks();\n      runInAction(() => {\n        this.privateBooks = privateBooks;\n        this.isLoading = false;\n      });\n      return privateBooks;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error instanceof Error ? error.message : String(error);\n        this.isLoading = false;\n      });\n      return [];\n    }\n  }\n\n  async addBook(book: Book): Promise<boolean> {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      let success: boolean;\n\n      if (this.showPrivateBooks) {\n        success = await this.booksService.addPrivateBook(book);\n\n        if (success) {\n          runInAction(() => {\n            this.privateBooks.push(book);\n            this.isLoading = false;\n          });\n          await this.loadBooks();\n        } else {\n          runInAction(() => {\n            this.isLoading = false;\n          });\n        }\n      } else {\n        success = await this.booksService.addBook(book);\n\n        if (success) {\n          runInAction(() => {\n            this.books.push(book);\n            this.isLoading = false;\n          });\n\n          await this.loadPrivateBooks();\n        } else {\n          runInAction(() => {\n            this.isLoading = false;\n          });\n        }\n      }\n\n      return success;\n    } catch (error) {\n      runInAction(() => {\n        this.error = error instanceof Error ? error.message : String(error);\n        this.isLoading = false;\n      });\n      return false;\n    }\n  }\n\n  setError(message: string): boolean {\n    this.error = message;\n    return false;\n  }\n\n  getDisplayedBooks(): Book[] {\n    return this.showPrivateBooks ? this.privateBooks : this.books;\n  }\n}"],"mappings":"AAAA,SAASA,kBAAkB,EAAEC,WAAW,QAAQ,MAAM;AACtD,OAAOC,YAAY,MAAM,0BAA0B;AAGnD,eAAe,MAAMC,UAAU,CAAC;EAQ9BC,WAAWA,CAAA,EAAG;IAAA,KAPdC,KAAK,GAAW,EAAE;IAAA,KAClBC,YAAY,GAAW,EAAE;IAAA,KACzBC,SAAS,GAAY,KAAK;IAAA,KAC1BC,KAAK,GAAkB,IAAI;IAAA,KAC3BC,gBAAgB,GAAY,KAAK;IAAA,KACzBC,YAAY;IAGlBV,kBAAkB,CAAC,IAAI,CAAC;IACxB,IAAI,CAACU,YAAY,GAAG,IAAIR,YAAY,CAAC,CAAC;EACxC;EAEA,MAAMS,SAASA,CAAA,EAAoB;IACjC,IAAI,CAACJ,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,KAAK,GAAG,IAAI;IAEjB,IAAI;MACF,MAAMH,KAAK,GAAG,MAAM,IAAI,CAACK,YAAY,CAACE,QAAQ,CAAC,CAAC;MAChDX,WAAW,CAAC,MAAM;QAChB,IAAI,CAACI,KAAK,GAAGA,KAAK;QAClB,IAAI,CAACE,SAAS,GAAG,KAAK;MACxB,CAAC,CAAC;MACF,OAAOF,KAAK;IACd,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdP,WAAW,CAAC,MAAM;QAChB,IAAI,CAACO,KAAK,GAAGA,KAAK,YAAYK,KAAK,GAAGL,KAAK,CAACM,OAAO,GAAGC,MAAM,CAACP,KAAK,CAAC;QACnE,IAAI,CAACD,SAAS,GAAG,KAAK;MACxB,CAAC,CAAC;MACF,OAAO,EAAE;IACX;EACF;EAEA,MAAMS,gBAAgBA,CAAA,EAAoB;IACxC,IAAI,CAACT,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,KAAK,GAAG,IAAI;IAEjB,IAAI;MACF,MAAMF,YAAY,GAAG,MAAM,IAAI,CAACI,YAAY,CAACO,eAAe,CAAC,CAAC;MAC9DhB,WAAW,CAAC,MAAM;QAChB,IAAI,CAACK,YAAY,GAAGA,YAAY;QAChC,IAAI,CAACC,SAAS,GAAG,KAAK;MACxB,CAAC,CAAC;MACF,OAAOD,YAAY;IACrB,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdP,WAAW,CAAC,MAAM;QAChB,IAAI,CAACO,KAAK,GAAGA,KAAK,YAAYK,KAAK,GAAGL,KAAK,CAACM,OAAO,GAAGC,MAAM,CAACP,KAAK,CAAC;QACnE,IAAI,CAACD,SAAS,GAAG,KAAK;MACxB,CAAC,CAAC;MACF,OAAO,EAAE;IACX;EACF;EAEA,MAAMW,OAAOA,CAACC,IAAU,EAAoB;IAC1C,IAAI,CAACZ,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,KAAK,GAAG,IAAI;IAEjB,IAAI;MACF,IAAIY,OAAgB;MAEpB,IAAI,IAAI,CAACX,gBAAgB,EAAE;QACzBW,OAAO,GAAG,MAAM,IAAI,CAACV,YAAY,CAACW,cAAc,CAACF,IAAI,CAAC;QAEtD,IAAIC,OAAO,EAAE;UACXnB,WAAW,CAAC,MAAM;YAChB,IAAI,CAACK,YAAY,CAACgB,IAAI,CAACH,IAAI,CAAC;YAC5B,IAAI,CAACZ,SAAS,GAAG,KAAK;UACxB,CAAC,CAAC;UACF,MAAM,IAAI,CAACI,SAAS,CAAC,CAAC;QACxB,CAAC,MAAM;UACLV,WAAW,CAAC,MAAM;YAChB,IAAI,CAACM,SAAS,GAAG,KAAK;UACxB,CAAC,CAAC;QACJ;MACF,CAAC,MAAM;QACLa,OAAO,GAAG,MAAM,IAAI,CAACV,YAAY,CAACQ,OAAO,CAACC,IAAI,CAAC;QAE/C,IAAIC,OAAO,EAAE;UACXnB,WAAW,CAAC,MAAM;YAChB,IAAI,CAACI,KAAK,CAACiB,IAAI,CAACH,IAAI,CAAC;YACrB,IAAI,CAACZ,SAAS,GAAG,KAAK;UACxB,CAAC,CAAC;UAEF,MAAM,IAAI,CAACS,gBAAgB,CAAC,CAAC;QAC/B,CAAC,MAAM;UACLf,WAAW,CAAC,MAAM;YAChB,IAAI,CAACM,SAAS,GAAG,KAAK;UACxB,CAAC,CAAC;QACJ;MACF;MAEA,OAAOa,OAAO;IAChB,CAAC,CAAC,OAAOZ,KAAK,EAAE;MACdP,WAAW,CAAC,MAAM;QAChB,IAAI,CAACO,KAAK,GAAGA,KAAK,YAAYK,KAAK,GAAGL,KAAK,CAACM,OAAO,GAAGC,MAAM,CAACP,KAAK,CAAC;QACnE,IAAI,CAACD,SAAS,GAAG,KAAK;MACxB,CAAC,CAAC;MACF,OAAO,KAAK;IACd;EACF;EAEAgB,QAAQA,CAACT,OAAe,EAAW;IACjC,IAAI,CAACN,KAAK,GAAGM,OAAO;IACpB,OAAO,KAAK;EACd;EAEAU,iBAAiBA,CAAA,EAAW;IAC1B,OAAO,IAAI,CAACf,gBAAgB,GAAG,IAAI,CAACH,YAAY,GAAG,IAAI,CAACD,KAAK;EAC/D;AACF","ignoreList":[]},"metadata":{},"sourceType":"module"}